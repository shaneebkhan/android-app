<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="_assets_primary_variables" inherit_id="web._assets_primary_variables">
    <xpath expr="//link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/website_blog/static/src/scss/primary_variables.scss"/>
    </xpath>
</template>

<template id="assets_editor" inherit_id="website.assets_editor" name="Blog Editor">
    <xpath expr="." position="inside">
        <script type="text/javascript" src="/website_blog/static/src/js/website_blog.editor.js"></script>
        <script type="text/javascript" src="/website_blog/static/src/js/s_latest_posts_editor.js"/>
        <script type="text/javascript" src="/website_blog/static/src/js/tours/website_blog.js"></script>
    </xpath>
</template>

<template id="assets_frontend_blog" inherit_id="website.assets_frontend" name="Blog Front-end assets">
    <xpath expr="." position="inside">
        <link rel="stylesheet" type="text/scss" href="/website_blog/static/src/scss/website_blog.scss"/>

        <script type="text/javascript" src="/website_blog/static/src/js/contentshare.js"/>
        <script type="text/javascript" src="/website_blog/static/src/js/website_blog.js"/>
        <script type="text/javascript" src="/website_blog/static/src/js/s_latest_posts_frontend.js"/>
    </xpath>
</template>


<!-- ======   Overall pages layout   ===========================================
============================================================================ -->
<template id="index" name="Blog Navigation">
    <t t-call="website.layout">
        <div id="wrap" class="js_blog website_blog">
            <t t-raw="0"/>

            <!-- Droppable-area shared across all blog's pages -->
            <div class="oe_structure oe_empty o_wblog_structure_shared"
                data-editor-message="DRAG BUILDING BLOCKS HERE"
                data-editor-sub-message="Visible in all blogs' pages"/>
        </div>
    </t>
</template>

<!-- ======  Blog(s) Index : Displaying a list of Blog Posts ===================
Used by 'All blogs' and 'blog' (to share the same layout options) and to display
list of filtered posts (by date or tag).

Options:
# opt_blog_cover_post: Replace top-banner content with the latest published post
    > opt_blog_cover_post_fullwidth_design: use fullwith design
    > opt_blog_cover_post_show_author: show the author

# opt_blog_cards_design: wrap posts in a standard bts cards components
# opt_blog_list_view: display post in a list rather than a grid
# opt_blog_sidebar_show: show sidebar
# opt_blog_blogs_nav_show: show blogs navigation bar
# opt_blog_readable: increase font-size, adapt layout
============================================================================ -->
<template id="blog_post_short" name="Blog Posts">
    <t t-call="website_blog.index">
        <t t-set="head" t-if="blog">
            <link t-att-href="'/blog/%s/feed' % (blog.id)" type="application/atom+xml" rel="alternate" title="Atom Feed"/>
            <meta t-if="len(active_tag_ids) > 0" name="robots" t-attf-content="#{len(active_tag_ids) > 1 and 'noindex,'} nofollow"/>
        </t>

        <section id="o_wblog_blog_top">
            <!-- Selectively display droppable-areas for 'all blogs'/single-blog pages -->
            <t t-if="not tag and not date_begin">
                <div id="o_wblog_blog_top_droppable">
                    <div t-if="blog" t-field="blog.content" class="oe_structure oe_empty" data-editor-message="DRAG BUILDING BLOCKS HERE" t-attf-data-editor-sub-message="Visible on this page only (#{blog.name})." />
                    <div t-elif="blogs" class="oe_structure oe_empty" data-editor-message="DRAG BUILDING BLOCKS HERE"/>
                </div>
            </t>
            <!-- Droppable-area for filtered results (tags or date) -->
            <div t-if="tag or date_begin" class="oe_structure oe_empty" data-editor-message="DRAG BUILDING BLOCKS HERE" contenteditable="true"/>
        </section>

        <section id="o_wblog_index_content" t-attf-class="#{'o_wblog_page_cards_bg' if opt_blog_cards_design else ''}">
            <div class="container">
                <div t-attf-class="row py-4 #{'justify-content-between' if opt_blog_sidebar_show else 'justify-content-center'}">
                    <div id="o_wblog_posts_loop_container" t-attf-class="col #{'o_wblog_read' if opt_blog_list_view else ''}">

                        <t t-call="website_blog.posts_loop">
                            <t t-if="not blog" t-set="posts_list_show_parent_blog" t-value="True"/>
                        </t>

                        <t t-call="website.pager" >
                            <t t-set="classname">justify-content-center</t>
                        </t>
                    </div>
                </div>
            </div>
        </section>
    </t>
</template>

<!-- (Option) Blog: Show latest-post as top banner -->
<template id="opt_blog_cover_post" name="Top banner - Show Latest post" inherit_id="website_blog.blog_post_short" active="True" customize_show="True">
    <xpath expr="//div[@id='o_wblog_blog_top_droppable']" position="replace">

        <!-- In the general post list, exclude the first post since it will be shown here -->
        <t t-set="posts_list_exclude_first" t-value="True"/>

        <t t-set="blog_post" t-value="first_published_blog_post"/>

        <div class="container">
            <div class="row py-4">
                <div t-attf-class="mb-3 mb-md-0 #{'col-md-5' if (not opt_blog_list_view and not opt_blog_sidebar_show) else 'col-md-6'}">
                    <t t-call="website_blog.blog_cover">
                        <t t-set="cover_properties" t-value="first_published_blog_post_cover_properties"/>
                        <t t-set="additionnal_classes" t-value="'h-100 py-5 py-md-0 overflow-hidden rounded shadow'"/>
                    </t>
                </div>
                <div t-att-class="'col-md-7' if (not opt_blog_list_view and not opt_blog_sidebar_show) else 'col-md-6'">
                    <div class="container position-relative h-100 d-flex flex-column justify-content-around pt-1 pb-2">
                        <div t-attf-class="o_wblog_post_title o_wblog_cover_font_regular #{'js_tweet' if opt_blog_post_select_to_tweet else ''} #{'js_comment' if opt_blog_post_select_to_comment else ''}">
                            <div t-if="not date and not tag" class="h4 mb-3 bg-warning px-2 rounded-sm d-inline-block mr-auto">Latest</div>
                            <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}"
                               t-field="blog_post.name" class="h1 d-block" t-att-data-blog-id="blog_post.id" placeholder="Blog Post Title"/>
                            <div t-field="blog_post.subtitle" class="lead"  placeholder="Subtitle"/>

                            <div t-if="not blog or opt_blog_cover_post_show_author" class="d-flex">
                                <div t-if="not blog" class="small mt-2 mb-3 mr-1">
                                    in <i class="fa fa-folder-open text-muted"/> <a t-attf-href="#{blog_url(blog=blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                                    <t t-if="opt_blog_cover_post_show_author">, by</t>
                                </div>
                                <t t-if="opt_blog_cover_post_show_author" t-call="website_blog.post_author">
                                    <t t-set="additionnal_classes" t-value="'d-inline-flex h6 w-auto'"/>
                                    <t t-set="hide_date" t-value="True"/>
                                </t>
                            </div>

                            <div t-field="blog_post.teaser" class="mb-4"  placeholder=""/>


                            <div>
                                <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}" class="btn btn-primary">Read more</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 mt-3" t-if="not opt_blog_blogs_nav_show"> <hr/> </div>
            </div>
        </div>
    </xpath>
</template>

<!-- (Option) Blog: Show latest-post as top banner : 'Full Width' design -->
<template id="opt_blog_cover_post_fullwidth_design" name="Full Width Cover" inherit_id="website_blog.opt_blog_cover_post" active="True" customize_show="True">
    <xpath expr="//div[hasclass('container')]" position="replace">
        <t t-call="website_blog.blog_cover">
            <t t-set="cover_properties" t-value="first_published_blog_post_cover_properties"/>
            <t t-set="use_filters" t-value="True"/>
            <t t-set="use_text_size" t-value="True"/>
            <t t-set="use_text_align" t-value="True"/>
            <t t-set="additionnal_classes" t-value="'o_wblog_post_page_cover o_wblog_has_cover cover_auto'"/>

            <div class="container position-relative h-100 d-flex flex-column justify-content-around">
                <div t-attf-class="o_wblog_post_title o_wblog_cover_font_regular #{'js_tweet' if opt_blog_post_select_to_tweet else ''} #{'js_comment' if opt_blog_post_select_to_comment else ''}">
                    <div t-if="not date and not tag" class="h4 bg-warning px-2 d-inline-block rounded-sm">Latest</div>
                    <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}" t-att-title="blog_post.name" class="text-white text-decoration-none">
                        <div t-field="blog_post.name" id="o_wblog_post_name" t-att-data-blog-id="blog_post.id" placeholder="Blog Post Title"/>
                        <div t-field="blog_post.subtitle" id="o_wblog_post_subtitle"  placeholder="Subtitle"/>
                    </a>

                    <div t-if="not blog or opt_blog_cover_post_show_author">
                        <span t-if="not blog" class="text-white small mt-2 mb-3">
                            in <i class="fa fa-folder-open text-white-75"/><a t-attf-href="#{blog_url(blog=blog_post.blog_id)}" class="text-white" t-field="blog_post.blog_id"/>
                            <t t-if="opt_blog_cover_post_show_author">, </t>
                        </span>
                        <small t-if="opt_blog_cover_post_show_author">
                            by
                            <t t-if="opt_blog_cover_post_show_author" t-call="website_blog.post_author">
                                <t t-set="additionnal_classes" t-value="'d-inline-flex w-auto text-white my-2 ml-1'"/>
                                <t t-set="hide_date" t-value="True"/>
                            </t>
                        </small>
                    </div>

                    <div class="mt-3">
                        <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}" class="btn btn-primary">Read more</a>
                    </div>
                </div>
            </div>
        </t>
    </xpath>
</template>

<!-- (Option) Blog: Show latest-post as top banner : Show author -->
<template id="opt_blog_cover_post_show_author" name="Show Author" inherit_id="website_blog.opt_blog_cover_post" active="False" customize_show="True">
    <xpath expr="//t[@t-set='posts_list_exclude_first']" position="after">
        <t t-set="opt_blog_cover_post_show_author" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Blog: Blogs Nav : Show -->
<template id="opt_blog_blogs_nav_show" name="Blogs Navigation" inherit_id="website_blog.blog_post_short" active="True" customize_show="True">
    <xpath expr="//t/t" position="before">
        <t t-set="opt_blog_blogs_nav_show" t-value="True"/>
    </xpath>
    <xpath expr="//section[@id='o_wblog_index_content']" position="before">
        <t t-call="website_blog.blogs_nav"/>
    </xpath>
</template>

<!-- (Option) Blog: Sidebar : Show -->
<template id="opt_blog_sidebar_show" name="Show Sidebar" inherit_id="website_blog.blog_post_short" active="False" customize_show="True">
    <xpath expr="//t/t" position="before">
        <t t-set="opt_blog_sidebar_show" t-value="True"/>
    </xpath>

    <xpath expr="//div[@id='o_wblog_posts_loop_container']" position="after">
        <div t-if="opt_blog_list_view" class="border-right d-none d-lg-block" style="opacity: 0.5"/>
        <div t-attf-class="col-12 col-sm-12 col-md-3 d-flex #{'col-lg-4' if opt_blog_list_view else 'ml-lg-5'}">
            <t t-call="website_blog.sidebar_blog_index"/>
        </div>
    </xpath>
</template>

<!-- (Option) Blog: Posts List: Cards design -->
<template id="opt_blog_cards_design" name="'Cards' design" inherit_id="website_blog.blog_post_short" active="False" customize_show="True">
    <xpath expr="//t/t" position="before">
        <t t-set="opt_blog_cards_design" t-value="true"/>
    </xpath>
</template>

<!-- (Option) Blog: Show Posts in list-view -->
<template id="opt_blog_list_view" name="List View" inherit_id="website_blog.blog_post_short" active="False" customize_show="True">
    <xpath expr="//t/t" position="before">
        <t t-set="opt_blog_list_view" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Blog: Increase readability -->
<template id="opt_blog_readable" name="Increase readability" inherit_id="website_blog.blog_post_short" active="True" customize_show="True">
    <xpath expr="//t/t" position="before">
        <t t-set="opt_blog_readable" t-value="True"/>
    </xpath>
</template>


<!-- ====== Blog Post Complete Layout ==========================================
Options:
# opt_blog_post_readable: Increase font-size, adapt content width
# opt_blog_post_sidebar: Show sidebar beside the post content
# opt_blog_post_regular_cover: Use 'regular cover' design rather than fullwidth
# opt_blog_post_breadcrumb: Display navigation breadcrumbs before the post content
# opt_blog_post_select_to_tweet: Select text content to tweet it

# opt_blog_post_comment: Enable comments
    > opt_blog_post_select_to_comment: select text to comment

# opt_blog_post_read_next: Show 'read next' banner at the bottom of the page

============================================================================ -->
<template id="website_blog.blog_post_complete" name="Blog Post">
    <t t-call="website_blog.index">
        <section id="o_wblog_post_top">
            <div id="title" class="blog_header" t-ignore="True">
                <t t-call="website_blog.blog_cover">
                    <t t-set="cover_properties" t-value="blog_post_cover_properties"/>
                    <t t-set="use_filters" t-value="True"/>
                    <t t-set="use_size" t-value="True"/>
                    <t t-set="use_text_size" t-value="True"/>
                    <t t-set="additionnal_classes" t-value="'o_wblog_post_page_cover'"/>

                    <div class="container text-center position-relative h-100 d-flex flex-column flex-grow-1 justify-content-around">
                        <div t-attf-class="o_wblog_post_title o_wblog_cover_font_regular #{'js_tweet' if opt_blog_post_select_to_tweet else ''} #{'js_comment' if opt_blog_post_select_to_comment else ''}">
                            <div t-field="blog_post.name" id="o_wblog_post_name" t-att-data-blog-id="blog_post.id" placeholder="Blog Post Title"/>
                            <div t-field="blog_post.subtitle" id="o_wblog_post_subtitle"  placeholder="Subtitle"/>
                        </div>
                        <a id="o_wblog_post_content_jump" href="#o_wblog_post_content" class="css_editable_mode_hidden justify-content-center align-items-center rounded-circle mx-auto text-decoration-none">
                            <i class="fa fa-angle-down fa-3x text-white" aria-label="To blog content" title="To blog content"/>
                        </a>
                    </div>
                </t>
            </div>
        </section>

        <section id="o_wblog_post_main" t-attf-class="container pt-4 pb-5 #{'o_wblog_post_main_transition' if is_transitioning else ''}">
            <!-- Sidebar-enabled Layout -->
            <div t-if="opt_blog_post_sidebar" t-attf-class="mx-auto #{'o_wblog_read_with_sidebar' if opt_blog_post_readable else ''}">
                <div t-attf-class="d-flex flex-column flex-lg-row #{'justify-content-between' if opt_blog_post_readable else ''}">
                    <div id="o_wblog_post_content" t-attf-class="#{'o_wblog_read w-100 flex-shrink-0' if opt_blog_post_readable else 'w-lg-75'}">
                        <t t-call="website_blog.blog_post_content"/>
                    </div>
                    <div id="o_wblog_post_sidebar_col" t-attf-class="pl-lg-5 #{'flex-grow-1 w-lg-25' if not opt_blog_post_readable else ''}">
                        <t t-call="website_blog.blog_post_sidebar"/>
                    </div>
                </div>
            </div>

            <!-- No-Sidebar Layout -->
            <div t-if="not opt_blog_post_sidebar" t-attf-class="mx-auto #{'o_wblog_read' if opt_blog_post_readable else ''}">
                <div class="d-flex flex-column flex-lg-row">
                    <div id="o_wblog_post_content" t-attf-class=" #{'o_wblog_read w-100 flex-shrink-0' if opt_blog_post_readable else ''}">
                        <t t-call="website_blog.blog_post_content"/>
                    </div>
                </div>
            </div>
        </section>
        <section id="o_wblog_post_footer"/>
    </t>
</template>

<!-- ====== Blog Post Content ==================================================
============================================================================ -->
<template id="website_blog.blog_post_content" name="Blog post content">
    <t t-if="opt_blog_post_breadcrumb and not opt_blog_post_regular_cover" t-call="website_blog.post_breadcrumbs">
        <t t-set="additionnal_classes" t-value="'mb-3 bg-transparent'"></t>
    </t>
    <div t-field="blog_post.content"
        data-editor-message="WRITE HERE OR DRAG BUILDING BLOCKS"
        t-attf-class="o_wblog_post_content_field #{'js_tweet' if opt_blog_post_select_to_tweet else ''} #{'js_comment' if opt_blog_post_select_to_comment else ''} #{'o_wblog_read_text' if opt_blog_post_readable else ''}"/>

    <div t-if="len(blogs) > 1 or len(blog_post.tag_ids) > 0" class="css_editable_mode_hidden text-muted">
        <div t-if="len(blogs) > 1">in <a t-attf-href="#{blog_url(blog=blog_post.blog_id)}"><b t-field="blog.name"/></a></div>
        <div t-if="len(blog_post.tag_ids) > 0">#
            <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                <a class="badge border mr-1" t-attf-href="#{blog_url(tag=one_tag.id, date_begin=False, date_end=False)}" t-esc="one_tag.name"/>
            </t>
        </div>
    </div>
</template>


<!-- (Option) Post: Increase readability -->
<template id="opt_blog_post_readable" name="Increase readability" inherit_id="website_blog.blog_post_complete" active="True" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_top']" position="before">
        <t t-set="opt_blog_post_readable" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Post: Show Sidebar -->
<template id="opt_blog_post_sidebar" name="Show Sidebar" inherit_id="website_blog.blog_post_complete" active="False" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_top']" position="before">
        <t t-set="opt_blog_post_sidebar" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Post: Regular Cover -->
<template id="opt_blog_post_regular_cover" name="'Regular' Cover" inherit_id="website_blog.blog_post_complete" active="False" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_top']" position="before">
        <t t-set="opt_blog_post_regular_cover" t-value="True"/>
    </xpath>

    <xpath expr="//div[@id='title']" position="replace">
        <div class="container">
            <t t-set="readableClass" t-if="opt_blog_post_readable and opt_blog_post_sidebar" t-value="'o_wblog_read_with_sidebar mx-auto'"/>
            <t t-set="readableClass" t-elif="opt_blog_post_readable" t-value="'container'"/>

            <div id="title" t-attf-class="blog_header o_wblog_regular_cover_container #{readableClass or ''}">

                <t t-if="opt_blog_post_breadcrumb" t-call="website_blog.post_breadcrumbs">
                    <t t-set="additionnal_classes" t-value="'mt-4 mb-3 bg-transparent'"></t>
                </t>

                <div t-att-class="'pt-4' if not opt_blog_post_breadcrumb else ''">
                    <div t-attf-class="o_wblog_post_title mb-3 #{'js_tweet' if opt_blog_post_select_to_tweet else ''} #{'js_comment' if opt_blog_post_select_to_comment else ''}" t-ignore="False">
                        <div t-field="blog_post.name" id="o_wblog_post_name" t-att-data-blog-id="blog_post.id" placeholder="Title"/>
                        <div t-field="blog_post.subtitle" id="o_wblog_post_subtitle"  placeholder="Subtitle"/>
                    </div>
                    <div class="text-muted mb-2">
                        <i class="fa fa-clock-o fa-fw"/>
                        <span t-field="blog_post.post_date" class="text-muted" t-options='{"format": "d MMMM, yyyy"}'/>
                        <span>by
                            <t t-call="website_blog.post_author">
                                <t t-set="additionnal_classes" t-value="'d-inline-flex mr-2'"/>
                                <t t-set="hide_date" t-value="True"/>
                            </t>
                        </span>
                        <span t-if="len(blog_post.message_ids) > 0" class="text-nowrap pl-2">|
                            <i class="fa fa-comment text-muted mr-1"/><t t-esc="len(blog_post.message_ids)"/>
                            <t t-if="len(blog_post.message_ids)>1">Comments</t>
                            <t t-else="">Comment</t>
                        </span>
                        <span t-elif="opt_blog_post_comment">| No comments yet</span>
                    </div>
                </div>

                <t t-call="website_blog.blog_cover">
                    <t t-set="additionnal_classes" t-value="'o_wblog_post_page_cover o_wblog_post_page_cover_regular rounded shadow overflow-hidden'"/>
                    <t t-set="cover_properties" t-value="blog_post_cover_properties"/>
                    <t t-set="use_size" t-value="True"/>
                </t>
            </div>
        </div>
    </xpath>
</template>

<!-- (Option) Post: Show Breadcrumb -->
<template id="opt_blog_post_breadcrumb" name="Show Breadcrumbs" inherit_id="website_blog.blog_post_complete" active="True" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_top']" position="before">
        <t t-set="opt_blog_post_breadcrumb" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Post: Select text to Tweet -->
<template id="opt_blog_post_select_to_tweet" name="Select to Tweet" inherit_id="website_blog.blog_post_complete" active="False" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_top']" position="before">
        <t t-set="opt_blog_post_select_to_tweet" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Post: Comments -->
<template id="opt_blog_post_comment" name="Allow comments" inherit_id="website_blog.blog_post_complete" active="False" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_top']" position="before">
        <t t-set="opt_blog_post_comment" t-value="True"/>
    </xpath>
    <xpath expr="//section[@id='o_wblog_post_main']" position="inside">
        <t t-set="readableClass" t-if="opt_blog_post_readable and opt_blog_post_sidebar" t-value="'o_wblog_read_with_sidebar'"/>
        <t t-set="readableClass" t-elif="opt_blog_post_readable" t-value="'o_wblog_read'"/>

        <div class="container">
            <div t-attf-class="mx-auto #{readableClass}">
                <div id="o_wblog_post_comments" t-attf-class="pt-4 o_wblog_read">
                    <div groups="base.group_public" class="small mb-4">
                        <a href="/web/login" class="btn btn-sm btn-primary"><b>Sign in</b></a> to leave a comment
                    </div>
                    <t t-call="portal.message_thread">
                        <t t-set="object" t-value="blog_post"/>
                    </t>
                </div>
            </div>
        </div>
    </xpath>
</template>

<!-- (Option) Post: Comments: Select text to Comment -->
<template id="opt_blog_post_select_to_comment" name="Select to comment" inherit_id="website_blog.opt_blog_post_comment" active="False" customize_show="True">
    <xpath expr="//t[@t-set='opt_blog_post_comment']" position="after">
        <t t-set="opt_blog_post_select_to_comment" t-value="True"/>
    </xpath>
</template>

<!-- (Option) Post : Read Next Article  -->
<template id="opt_blog_post_read_next" name="Read next article" inherit_id="website_blog.blog_post_complete" active="True" customize_show="True">
    <xpath expr="//section[@id='o_wblog_post_footer']" position="inside">
        <div t-if="next_post" class="css_editable_mode_hidden mt-5">
            <t t-if="opt_blog_post_regular_cover">
                <t t-if="opt_blog_post_sidebar" t-set="readableClass" t-value="'o_wblog_read_with_sidebar'"/>
                <t t-else="opt_blog_post_sidebar" t-set="readableClass" t-value="'o_wblog_read'"/>

                <div class="container">
                    <div t-attf-class="mb-4 mx-auto #{ readableClass if opt_blog_post_readable else ''}">
                        <hr/>
                        <div class="d-flex text-right py-4">
                            <div class="flex-grow-1 pr-3">
                                <span class="bg-warning h6 d-inline-block py-1 px-2 rounded-sm">Read Next</span>
                                <a t-att-href="'/blog/' + slug(next_post.blog_id) + '/post/' + slug(next_post)" t-att-title="'Read next' + next_post.name">
                                    <div t-field="next_post.name" id="o_wblog_post_name" t-att-data-blog-id="next_post.id" placeholder="Blog Post Title" class="h2"/>
                                    <div t-field="next_post.subtitle" id="o_wblog_post_subtitle" placeholder="Subtitle" class="lead"/>
                                </a>
                            </div>
                            <a t-att-href="'/blog/' + slug(next_post.blog_id) + '/post/' + slug(next_post)" t-att-title="'Read next' + next_post.name" class="w-25">
                                <t t-call="website_blog.blog_cover">
                                    <t t-set="cover_properties" t-value="next_post_cover_properties"/>
                                    <t t-set="additionnal_classes" t-value="'rounded shadow-sm overflow-hidden h-100'"/>
                                </t>
                            </a>
                        </div>
                    </div>
                </div>
            </t>
            <t t-else="">
                <div id="o_wblog_next_container" class="d-flex flex-column">
                    <t t-call="website_blog.blog_cover">
                        <t t-set="cover_properties" t-value="next_post_cover_properties"/>
                        <t t-set="use_filters" t-value="True"/>
                        <t t-set="additionnal_classes" t-value="'o_wblog_post_page_cover o_wblog_post_page_cover_footer o_wblog_has_cover'"/>

                        <a id="o_wblog_next_post_info" class="d-none"
                           t-att-data-size="cover_properties.get('resize_class')"
                           t-att-data-text="cover_properties.get('text_size_class')"
                           t-att-data-url="'/blog/' + slug(next_post.blog_id) + '/post/' + slug(next_post) + '?is_transitioning=True'"/>

                        <t t-set="next_cover_is_full" t-value="'cover_full' in cover_properties.get('resize_class')"/>
                        <t t-set="next_cover_is_auto" t-value="'cover_auto' in cover_properties.get('resize_class')"/>

                        <div class="container text-center position-relative h-100 d-flex flex-column flex-grow-1 justify-content-around">
                            <div t-attf-class="o_wblog_toggle d-flex #{'mb-n5' if next_cover_is_full else ''}">
                                <span class="bg-warning h4 d-inline-block py-1 px-2 rounded-sm">Read Next</span>
                            </div>

                            <div t-attf-class="o_wblog_post_title o_wblog_cover_font_regular">
                                <div t-field="next_post.name" id="o_wblog_post_name" t-att-data-blog-id="next_post.id" placeholder="Blog Post Title"/>
                                <div t-field="next_post.subtitle" id="o_wblog_post_subtitle"  placeholder="Subtitle"/>
                            </div>

                            <!-- We need to emulate all next post's header elements in order
                            to compute the future cover's height. For 'full_covers' , the room
                            that will be occupied by the 'scroll-down' link is temporary taken
                            by the loader circle. Fot others layouts, an empty <div> is enough.
                            -->
                            <div t-if="next_cover_is_full" class="o_wblog_next_loader justify-content-center align-items-center mx-auto position-relative">
                                <div class="o_wblog_toggle d-none rounded-circle bg-white-50"/>
                            </div>
                            <div t-else="" t-attf-class="o_wblog_next_fake_btn #{'d-flex o_wblog_toggle' if next_cover_is_auto else ''}"/>
                        </div>
                    </t>
                    <div t-if="not next_cover_is_full" class="o_wblog_next_loader o_wblog_toggle d-none justify-content-center align-items-center flex-grow-1 position-relative">
                        <div class="d-inline-block rounded-circle"/>
                    </div>
                </div>
            </t>
        </div>
    </xpath>
</template>

<!-- ======   'Latest Posts' Snippets   ========================================
============================================================================ -->
<template id="s_latest_posts" name="Latest Posts - List">
    <section class="s_latest_posts pt16 pb16">
        <div class="container">
            <h2>Latest Posts</h2>
            <div class="row s_col_no_bgcolor s_nb_column_fixed js_get_posts"
                data-loading="true"
                data-template="website_blog.s_latest_posts_list_template"/>
        </div>
    </section>
</template>

<template id="s_latest_posts_big_picture" name="Latest Posts - Big Images">
    <section class="s_latest_posts_big_picture pt16 pb16">
        <div class="container">
            <h2 style="text-align: center">Latest Posts</h2>
            <div class="row s_col_no_bgcolor s_nb_column_fixed js_get_posts"
                data-loading="true"
                data-template="website_blog.s_latest_posts_big_picture_template"/>
        </div>
    </section>
</template>

<template id="s_latest_posts_list_template">
    <div t-foreach="posts" t-as="p" class="d-flex col-12 mt-3 s_latest_posts_post">
        <a class="s_latest_posts_post_cover flex-grow-0 flex-shrink-0 align-self-baseline position-relative" t-attf-href="/blog/#{p.blog_id.id}/post/#{p.id}" t-att-title="'Read' + p.name">
            <t t-call="website_blog.blog_cover">
                <t t-set="cover_properties" t-value="json.loads(p.cover_properties)"/>
                <t t-set="additionnal_classes" t-value="'w-100 h-100 bg-200 position-absolute'"/>

                <div class="s_latest_posts_loader d-flex align-items-center justify-content-center bg-200">
                    <div class="d-none rounded-circle bg-black-25 w-25 h-25"/>
                </div>
            </t>
        </a>
        <div class="pl-2">
            <a class="" t-att-title="'Read' + p.name" t-attf-href="/blog/#{p.blog_id.id}/post/#{p.id}">
                <div class="s_latest_posts_post_title mb-1" t-field="p.name"/>
            </a>
            <div class="s_latest_posts_post_subtitle mb-1 d-none d-sm-block" t-field="p.subtitle"/>
        </div>
    </div>
</template>

<template id="s_latest_posts_big_picture_template">
    <figure t-foreach="posts" t-as="p" class="col-12 col-md-6 col-xl-4 my-3 s_latest_posts_post">
        <a class="s_latest_posts_post_cover position-relative d-flex flex-column shadow-sm overflow-hidden rounded text-decoration-none" t-attf-href="/blog/#{p.blog_id.id}/post/#{p.id}">
            <t t-call="website_blog.blog_cover">
                <t t-set="cover_properties" t-value="json.loads(p.cover_properties)"/>
                <t t-set="use_filters" t-value="True"/>
                <t t-set="additionnal_classes" t-value="'h-100 w-100 bg-600 position-absolute'"/>
            </t>

            <figcaption class="text-center w-100 h-100 px-3 d-flex flex-column flex-grow-1">
                <div class="s_latest_posts_post_title text-white" t-field="p.name"/>
                <div class="s_latest_posts_post_subtitle text-white" t-field="p.subtitle"/>
            </figcaption>

            <div class="s_latest_posts_loader d-flex align-items-center justify-content-center bg-200">
                <div class="d-none rounded-circle bg-black-25 w-25 h-25"/>
            </div>
        </a>
    </figure>
</template>

<!-- ======   Technical Templates   ============================================
============================================================================ -->
<!-- Duplicate post Action -->
<template id="blog_edit_options" inherit_id="website.user_navbar" name="Edit Blog Options">
    <xpath expr="//a[@id='edit-in-backend']" position="after">
        <t groups="website.group_website_designer" t-if="main_object._name == 'blog.post'">
            <form class="duplicate d-none" action="/blog/post_duplicate" method="POST">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input name="blog_post_id" t-att-value="blog_post.id if blog_post else None"/>
            </form>
            <a href="#" class="duplicate dropdown-item" onclick="$(this).prev('form').submit()">Duplicate</a>
        </t>
    </xpath>
</template>

<!-- User Navbar -->
<template id="user_navbar_inherit_website_blog" inherit_id="website.user_navbar">
    <xpath expr="//div[@id='o_new_content_menu_choices']//div[@name='module_website_blog']" position="attributes">
        <attribute name="name"/>
        <attribute name="t-att-data-module-id"/>
        <attribute name="t-att-data-module-shortdesc"/>
        <attribute name="groups">website.group_website_designer</attribute>
    </xpath>
</template>

<!-- Atom Feed -->
<template id="blog_feed">&lt;?xml version="1.0" encoding="utf-8"?&gt;
<feed t-att-xmlns="'http://www.w3.org/2005/Atom'">
    <title t-esc="blog.name"/>
    <link t-att-href="'%s/blog/%s' % (base_url ,blog.id)"/>
    <id t-esc="'%s/blog/%s' % (base_url, blog.id)"/>
    <updated t-esc="str((posts[0] if posts else blog).post_date).replace(' ', 'T') + 'Z'"/>
    <entry t-foreach="posts" t-as="post">
        <title t-esc="post.name"/>
        <link t-att-href="'%s%s' % (base_url, post.website_url)"/>
        <id t-esc="'%s%s' % (base_url, post.website_url)"/>
        <author><name t-esc="post.sudo().author_id.name"/></author>
        <summary t-esc="html2plaintext(post.teaser)"/>
        <updated t-esc="str(post.post_date).replace(' ', 'T') + 'Z'"/>
    </entry>
</feed>
</template>

<!-- Chatter templates -->
<template id="blog_post_template_new_post">
    <p>A new post <t t-esc="post.name" /> has been published on the <t t-esc="object.name" /> blog. Click here to access the blog :</p>
    <p style="margin-left: 30px; margin-top: 10 px; margin-bottom: 10px;">
        <a href="/blog/#{slug(object)}/post/#{slug(post)}"
            style="padding: 5px 10px; font-size: 12px; line-height: 18px; color: #FFFFFF; border-color:#875A7B; text-decoration: none; display: inline-block; margin-bottom: 0px; font-weight: 400; text-align: center; vertical-align: middle; cursor: pointer;background-color: #875A7B; border: 1px solid #875A7B; border-radius:3px">
            Access post
        </a>
    </p>
</template>

</odoo>
