<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <div
        class="o_mail_component_Composer"
        owl="1"
        t-att-data-id="id"
        t-att-class="{
            o_chatter_composer: options.chatter,
            o_with_avatar: options.avatar,
        }"
        t-name="mail.component.Composer">
        <div
            class="o_mail_component_Composer__sidebar"
            t-if="options.avatar">
            <img
                alt=""
                class="
                    o_mail_component_Composer__avatar
                    rounded-circle"
                t-att-src="userAvatar"/>
        </div>
        <div
            class="o_mail_component_Composer__core">
            <!-- New message composer -->
            <t t-if="options.chatter and !options.isLog">
                <!-- Text for followers -->
                <small
                    class="o_mail_component_Composer__followers">
                    <b
                        class="text-muted">To: </b>
                    <em
                        class="text-muted">Followers of </em>
                    <b>
                        <t t-if="options.recordName">
                            &#32;&quot;<t t-esc="options.recordName"/>&quot;
                        </t>
                        <t t-if="!options.recordName">
                            this document
                        </t>
                    </b>
                </small>
                <!-- List of followers -->
                <div
                    class="o_mail_component_Composer__suggestedPartners"
                    t-if="props.suggestedRecipients">
                    <div
                        t-attf-title="Add as recipient and follower (reason: {{ recipient.reason }})"
                        t-as="recipient"
                        t-foreach="state.showAllSuggestedRecipients ? props.suggestedRecipients : props.suggestedRecipients.slice(0, 2)">
                        <div
                            class="custom-control custom-checkbox">
                            <input
                                class="custom-control-input"
                                type="checkbox"
                                t-att-checked="recipient.checked ? 'checked' : undefined"
                                t-att-data-fullname="recipient.full_name"
                                t-attf-id="_suggested_partners_{{ recipient_index }}"/>
                            <label
                                class="custom-control-label"
                                t-attf-for="_suggested_partners_{{ recipient_index }}">
                                <t t-esc="recipient.name"/><t t-if="recipient.email_address"> (<t t-esc="recipient.email_address"/>)</t>
                            </label>
                        </div>
                    </div>
                    <t t-if='props.suggestedRecipients.length > 3'>
                        <a
                            href="#"
                            t-if="state.showAllSuggestedRecipients"
                            t-on-click="_onShowLessSuggestedRecipients">
                            Show <t t-esc="props.suggestedRecipients.length - 3"/> less
                        </a>
                        <a
                            href="#"
                            t-else=""
                            t-on-click="_onShowMoreSuggestedRecipients">
                            Show <t t-esc="props.suggestedRecipients.length - 3"/> more
                        </a>
                    </t>
                </div>
            </t>
            <div
                class="o_mail_component_Composer__main">
                <Input
                   class="o_mail_component_Composer__textInput"
                   t-on-post-message.stop="_onPostMessageTextInput"
                   t-ref="textInput"/>
                <div
                    class="o_mail_component_Composer__commands">
                    <EmojisButton
                        class="
                            o_mail_component_Composer__command
                            o_mail_component_Composer__commandEmojis"
                        t-on-emoji-selection.stop="_onEmojiSelection"/>
                    <button
                        aria-label="Add attachment"
                        class="
                            btn
                            btn-secondary
                            fa
                            fa-paperclip
                            o_mail_component_Composer__command
                            o_mail_component_Composer__commandAttachment"
                        title="Add attachment"
                        type="button"
                        t-on-click="_onClickAddAttachment"/>
                    <button
                        class="
                            btn
                            btn-primary
                            o_mail_component_Composer__command
                            o_mail_component_Composer__commandSend"
                        type="button"
                        t-if="options.sendButton"
                        t-on-click="_onClickSend">
                        <t t-if="options.isLog">Log</t><t t-else="">Send</t>
                    </button>
                </div>
            </div>
            <div
                class="o_mail_component_Composer__footer"
                t-if="showFooter">
                <AttachmentList
                   attachmentLocalIDs="state.attachmentLocalIDs"
                   class="o_mail_component_Composer__attachmentList"
                   options="attachmentOptions"
                   t-if="state.attachmentLocalIDs.length > 0"
                   t-on-unlink.stop="_onUnlinkAttachment"
                   t-on-view.stop="_onViewAttachment"/>
            </div>
            <input
                class="
                    d-none
                    o_mail_component_Composer__fileInput"
                multiple="true"
                type="file"
                t-key="'fileInput'"
                t-on-change="_onChangeAttachment"
                t-ref="fileInput"/>
        </div>
    </div>

</templates>
