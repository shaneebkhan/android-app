<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <li
        class="o_mail_component_systray_messaging_menu"
        owl="1"
        t-att-class="{
            show: state.toggleShow,
        }"
        t-att-data-id="id"
        t-name="mail.component.SystrayMessagingMenu">
        <a
            aria-expanded="false"
            class="o_toggler o-no-caret"
            data-toggle="dropdown"
            data-display="static"
            href="#"
            role="button"
            t-att-class="{
                show: state.toggleShow,
            }"
            t-on-click.stop="_onClickToggleShow"
            title="Conversations">
            <i
                aria-label="Messages"
                class="fa fa-comments-o"
                role="img"/>
            <span
                class="o_counter badge badge-pill"
                t-if="props.counter > 0">
                <t t-esc="props.counter"/>
            </span>
        </a>
        <div
            class="dropdown-menu dropdown-menu-right"
            role="menu"
            t-if="state.toggleShow">
            <div
                class="o_header">
                <button
                    class="btn btn-link o_filter"
                    role="tab"
                    t-foreach="['all', 'chat', 'channel']"
                    t-as="filter"
                    t-att-data-filter="filter"
                    t-att-class="{
                        o_active: state.filter === filter,
                    }"
                    t-key="filter"
                    t-on-click.stop="_onClickFilter"
                    type="button">
                    <t t-if="filter === 'all'">All</t>
                    <t t-elif="filter === 'chat'">Chat</t>
                    <t t-elif="filter === 'channel'">Channels</t>
                </button>
                <div
                    class="o_mail_component_autogrow"/>
                <button
                    class="btn btn-link o_new_message"
                    t-if="!props.discussOpen"
                    t-on-click.stop="_onClickNewMessage"
                    type="button">
                    New message
                </button>
            </div>
            <ThreadPreviewList
               filter="state.filter"
               t-on-select-thread.stop="_onSelectThread"/>
        </div>
    </li>

</templates>